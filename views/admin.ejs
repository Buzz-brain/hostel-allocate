<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Campus Hostel Allocation System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://ai-public.creatie.ai/gen_page/tailwind-custom.css" rel="stylesheet" />
    <script
        src="https://cdn.tailwindcss.com/3.4.5?plugins=forms@0.5.7,typography@0.5.13,aspect-ratio@0.4.2,container-queries@0.1.1"></script>
    <script src="https://ai-public.creatie.ai/gen_page/tailwind-config.min.js" data-color="#000000"
        data-border-radius="small"></script>
</head>

<body class="bg-gray-50 font-sans">
    <nav class="bg-white shadow">
        <div class="max-w-full mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <span class="ml-2 text-xl font-semibold text-blue-900">Campus Hostel Allocation</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <a href="#login"
                        class="!rounded-button inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium text-white bg-blue-900 hover:bg-custom/90"><i
                            class="fas fa-sign-out-alt mr-2"></i>Logout</a>
                </div>
            </div>
        </div>
    </nav>
    <main>
        <div class="max-w-full mx-auto px-4 py-4 sm:py-8">
            <div class="grid grid-cols-1 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-6">Hostel Administration Dashboard</h2>
                    <div class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <div class="p-3 bg-blue-500 rounded-lg"><i class="fas fa-bed text-white text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-gray-500">Total Rooms</p>
                                    <h3 class="text-xl font-bold" id="total-rooms"></h3>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <div class="p-3 bg-green-500 rounded-lg"><i
                                        class="fas fa-user-check text-white text-xl"></i></div>
                                <div class="ml-4">
                                    <p class="text-gray-500">Allocated Roomate</p>
                                    <h3 class="text-xl font-bold" id="students-with-roomate"></h3>
                                </div>
                            </div>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <div class="p-3 bg-yellow-500 rounded-lg"><i
                                        class="fas fa-clock text-white text-xl"></i></div>
                                <div class="ml-4">
                                    <p class="text-gray-500">Pending Roomate</p>
                                    <h3 class="text-xl font-bold" id="students-without-roomate"></h3>
                                </div>
                            </div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <div class="flex items-center">
                                <div class="p-3 bg-purple-500 rounded-lg"><i
                                        class="fas fa-users text-white text-xl"></i></div>
                                <div class="ml-4">
                                    <p class="text-gray-500">Total Students</p>
                                    <h3 class="text-xl font-bold" id="total-students"></h3>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 grid grid-cols-1 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow border">
                            <h3 class="text-lg font-semibold mb-4">Recent Allocations</h3>
                            <div class="overflow-x-auto -mx-6">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead>
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                                Student Name</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                                Room No.</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                                Hostel Name</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                                Roommate Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200" id="student-details-tbody">
                                      
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="bg-white">
        <div class="max-w-full mx-auto py-6 px-4 sm:py-12">
            <div
                class="mt-4 border-t border-gray-200 pt-4 flex flex-col-reverse sm:flex-row sm:items-center sm:justify-between sm:mt-8 sm:pt-8">
                <div class="flex justify-center space-x-6 mb-4 sm:mb-0 sm:order-2">
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
                <p class="text-center text-sm sm:text-base text-gray-400 sm:text-left sm:order-1">
                    Â© 2025 Campus Hostel Allocation. All rights reserved.
                </p>
            </div>
        </div>
    </footer>
<script>
  // Fetch total rooms
  fetch('/get-room-count')
    .then(response => response.json())
    .then(data => {
      document.getElementById('total-rooms').innerText = data.roomCount;
    })
    .catch(error => console.error(error));

  // Fetch total students
  fetch('/get-student-count')
    .then(response => response.json())
    .then(data => {
      document.getElementById('total-students').innerText = data.studentCount;
    })
    .catch(error => console.error(error));


// Fetch student details
fetch('/get-student-details')
  .then(response => response.json())
  .then(data => {
    const studentDetailsTbody = document.getElementById('student-details-tbody');
    studentDetailsTbody.innerHTML = '';
    data.studentDetails.forEach(student => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td class="px-4 py-3">${student.name}</td>
        <td class="px-4 py-3">RM-${student.roomNumber}</td>
        <td class="px-4 py-3">${student.hostelName}</td>
        <td class="px-4 py-3">
  <span 
    class="px-2 py-1 text-xs rounded-full 
    ${student.status === 'Not Allocated' ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}">
    ${student.status}
  </span>
</td>

      `;
      studentDetailsTbody.appendChild(row);
    });
  })
  .catch(error => console.error(error));



    // Fetch students without room
  fetch('/get-students-without-roommate')
    .then(response => response.json())
    .then(data => {
      document.getElementById('students-without-roomate').innerText = data.studentsWithoutRoommate.length;
    })
    .catch(error => console.error(error));

  // Fetch students with room
  fetch('/get-students-with-roommate')
    .then(response => response.json())
    .then(data => {
      document.getElementById('students-with-roomate').innerText = data.studentsWithRoommate.length;
    })
    .catch(error => console.error(error));

</script>